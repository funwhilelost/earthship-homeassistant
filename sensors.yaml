# from `sensor:`

# useful system monitors

- platform: systemmonitor
  resources:
    - type: processor_use
    - type: memory_use_percent
    - type: last_boot

- platform: uptime
  unit_of_measurement: days

# create an actual REST sensor for the little PHP scraper
- platform: rest
  name: Water Sensors
  json_attributes:
    - snake_river_temp
  resource: http://sensors.funwhilelost.com/water.php
  value_template: '{{ value_json.snake_river_temp }}'

# https://community.home-assistant.io/t/sun-values-not-valid/89398/2
- platform: template
  sensors:
    # Snake River from the scraper
    snake_river_temp:
      friendly_name: 'Snake River Temperature'
      value_template: '{{ states.sensor.water_sensors.attributes["snake_river_temp"] }}'
      icon_template: mdi:waves
      unit_of_measurement: '°F'

    # Sunset & Sunrise
    next_sunrise:
      friendly_name: Sunrise
      value_template: '{{ as_timestamp(states.sun.sun.attributes.next_rising) | timestamp_custom("%H:%M") }}'
    next_sunset:
      friendly_name: Sunset
      value_template: '{{ as_timestamp(states.sun.sun.attributes.next_setting) | timestamp_custom("%H:%M") }}'
    solar_angle:
      friendly_name: "Sun angle"
      unit_of_measurement: 'degrees'
      value_template: "{{ state_attr('sun.sun', 'elevation') }}"
    local_wind_speed:
      friendly_name: "Wind speed"
      unit_of_measurement: 'mph'
      value_template: "{{ state_attr('weather.earth_ship', 'wind_speed') }}"
    local_wind_bearing:
      friendly_name: "Wind bearing"
      unit_of_measurement: 'degrees'
      value_template: "{{ state_attr('weather.earth_ship', 'wind_bearing') }}"
    local_temperature:
      friendly_name: "Local temperature"
      unit_of_measurement: '°F'
      value_template: "{{ state_attr('weather.earth_ship', 'temperature') }}"
    local_barometric_pressure:
      friendly_name: "Local barometric pressure"
      unit_of_measurement: 'mb'
      value_template: "{{ state_attr('weather.earth_ship', 'pressure') }}"
    local_humidity:
      friendly_name: "Local humidity"
      unit_of_measurement: '%'
      value_template: "{{ state_attr('weather.earth_ship', 'humidity') }}"

- platform: template
  sensors:
    kitchen_door:
      value_template: >-
        {% if states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_3.state == 'on' %}
          Open
        {% elif states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_3.state == 'off' %}
          Closed
        {% else %}
          n/a
        {% endif %}
      icon_template: >
        {% if states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_3.state == 'on' %}
          mdi:door-open
        {% elif states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_3.state == 'off' %}
          mdi:door-closed
        {% else %}
          mdi:help
        {% endif %} 

- platform: template
  sensors:
    porch_door:
      value_template: >-
        {% if states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_4.state == 'on' %}
          Open
        {% elif states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_4.state == 'off' %}
          Closed
        {% else %}
          n/a
        {% endif %}
      icon_template: >
        {% if states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_4.state == 'on' %}
          mdi:door-open
        {% elif states.binary_sensor.homeseer_technologies_unknown_type_0201_id_0008_sensor_4.state == 'off' %}
          mdi:door-closed
        {% else %}
          mdi:help
        {% endif %} 
